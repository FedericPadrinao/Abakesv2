@page
@model abakes2.Pages.Customer_OrderStatus3DModel
@{
}
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i&display=swap" rel="stylesheet">
    <title>Order Status</title>



    <link href="vendor/bootstrap/css/homepage/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="~/css/ContactUs/damarota-blog.css " asp-append-version="true">
    <link href="~/css/footer/layout.css" rel="stylesheet" asp-append-version="true">
    <link href="~/css/Account/PageHeading.css" rel="stylesheet" asp-append-version="true">
    <link href="~/css/badge/badge.css" rel="stylesheet" asp-append-version="true">

    <link rel="stylesheet" href="~/css/style.css" asp-append-version="true">


    <link href="~/css/OrderStatus/OrderStatus.css" rel="stylesheet" asp-append-version="true">
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">




</head>


<style>

    @@media (max-width: 768px) {
        .nav-item {
            margin-left: 80px;
        }
    }

    .container-box-3d{
    max-height: 500px; 
    max-width: 500px;
    margin: 60px auto;
    }
  .container h2{
      margin-top: 20px;
  }



</style>

<body>

    <div class="container">
        <div class="navbar">
            <div class="logo">
                <a href="/Index"><img src="~/img/logo/Logo.png" alt="logo" width="65px"></a>
            </div>
            <nav>
                <ul id="MenuItems">
                    <li><a href="/Index">Home</a></li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-bs-toggle="dropdown">Order</a>
                        <ul class="dropdown-menu">
                            <li><a href="/Customer_Order3DForm" class="dropdown-item">Customize 3D</a></li>
                            @if (Model.statusconfirm != null && Model.statusconfirm.Equals("true"))
                            {
                                <li><a href="/Customer_OrderForm" class="dropdown-item">Order Form</a></li>
                            }
                            else
                            {
                                <li><a href="/Customer_FullCapacity_Prompt" class="dropdown-item">Order Form</a></li>
                            }
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-bs-toggle="dropdown">Feedback</a>
                        <ul class="dropdown-menu">
                            <li><a href="/Customer_AddFeedback" class="dropdown-item">Add Feedback</a></li>
                            <li><a href="/Customer_Feedback?page=1" class="dropdown-item">View Feedback</a></li>
                        </ul>
                    </li>
                    <li><a href="/Customer_Gallery?page=1">Gallery</a></li>
                    <li><a href="/AboutUs">About us</a></li>
                    <li><a href="/ContactUs">Contact</a></li>


                </ul>
            </nav>
            <div class="dropdown text-end">
                <!-- ACCOUNT IMAGE-->
                @if (Model.userconfirm == null)
                {
                    <a class="signin" href="/Account">Sign in</a>
                }
                else
                {
                    <a href="#" class="d-block link-body-emphasis text-decoration-none dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                        <img src="@Model.imgconfirm" alt="mdo" width="32" height="32" class="rounded-circle">
                    </a>
                    <ul class="dropdown-menu text-small">
                        <li><a class="dropdown-item" href="/Customer_OrderStatus">My Simple Order</a></li>
                        <li><a class="dropdown-item active" href="/Customer_OrderStatus3D">My 3D Order</a></li>
                        <li><a class="dropdown-item" href="/Customer_CompleteOrders">Completed Orders</a></li>
                        <li><a class="dropdown-item" href="/Customer_AccountSettings?user=@Model.userconfirm">Account Settings</a></li>
                        <li><a class="dropdown-item" href="/Customer_AccountInformation?user=@Model.userconfirm">Account Information</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" asp-page="/index" asp-page-handler="LogOut">Sign out</a></li>
                    </ul>
                }
                <!-- ACCOUNT IMAGE-->

            </div>
            @if (Model.userconfirm != null)
            {
                <a href="/Customer_Notif" class="badge" data-badge="@Model.totalnotifCount"><img src="~/img/navbar/notification.png" width="30px" height="30px"></a>
                <a href="/Cart" class="badge" data-badge="@Model.totalcartCount"><img src="images/cart.png" width="30px" height="30px"></a>

            }
            <img src="images/menu.png" class="menu-icon" onclick="menutoggle()">
        </div>
    </div>


    <!-- Banner -->
    <section class="page-heading">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="text-content">

                        <h2>Order Progress</h2>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Banner -->
    <!-- progres Bar-->
        <div class="container">

    <div class="main">

        <div class="head">
            <p class="head_1">Order #@Model.order3D.ModelID<span></span></p>
            <p class="head_2">Expected Arrival: @Model.order3D.order3DExpectedD @Model.order3D.order3DExpectedT </p>
        </div>
        </div>
        <ul style="margin-bottom:70px">
            <!-- 1 Bar-->
            <li>
                <i class="fa-regular fa-eye icon"></i>
                @if (Model.orderInfo.status != null || Model.order3D.order3Dstatus == "Review & Quotation" || Model.order3D.order3Dstatus == "50% Downpayment" || Model.order3D.order3Dstatus == "Baking" || Model.order3D.order3Dstatus == "Order Confirmation" || Model.order3D.order3Dstatus == "Full Payment" || Model.order3D.order3Dstatus == "Delivery/Pickup" || Model.order3D.order3Dstatus == "Order Arrived")
                {
                    <div class="progres one active">
                        <p>1</p>
                        <i class="uil uil-check"></i>
                    </div>
                }
                else
                {
                    <div class="progres one">
                        <p>1</p>
                        <i class="uil uil-check"></i>
                    </div>
                }
                <p class="text">Design Your Cake</p>
            </li>
            <!-- 2 Bar-->
            <li>
                <i class="fa-solid fa-magnifying-glass icon"></i>
                @if (Model.order3D.order3Dstatus == "Review & Quotation"|| Model.order3D.order3Dstatus == "50% Downpayment" || Model.order3D.order3Dstatus == "Baking" || Model.order3D.order3Dstatus == "Order Confirmation" || Model.order3D.order3Dstatus == "Full Payment" || Model.order3D.order3Dstatus == "Delivery/Pickup" || Model.order3D.order3Dstatus == "Order Arrived")
                
                {
                <div class="progres two active">
                <p>2</p>
                <i class="uil uil-check"></i>
                </div>
                }
                else
                {
                <div class="progres two">
                <p>2</p>
                <i class="uil uil-check"></i>
                </div>  
                }
                
                <p class="text">Review & Quotation</p>
            </li>
            <!-- 3 Bar-->
            <li>
                <i class="fa-solid fa-hand-holding-dollar icon"></i>
                @if (Model.order3D.order3Dstatus == "50% Downpayment" || Model.order3D.order3Dstatus == "Baking" || Model.order3D.order3Dstatus == "Order Confirmation" || Model.order3D.order3Dstatus == "Full Payment" || Model.order3D.order3Dstatus == "Delivery/Pickup" || Model.order3D.order3Dstatus == "Order Arrived")
                {
                <div class="progres three active">
                <p>3</p>
                <i class="uil uil-check"></i>
                    </div>
                }
                else
                {
                <div class="progres three">
                <p>3</p>
                <i class="uil uil-check"></i>
                </div>
                }
               
                <p class="text">50% Downpayment</p>
            </li>
            <!-- 4 Bar-->
            <li>
                <i class="fa-solid fa-cake-candles icon"></i>
                @if (Model.order3D.order3Dstatus == "Baking" || Model.order3D.order3Dstatus == "Order Confirmation" || Model.order3D.order3Dstatus == "Full Payment" || Model.order3D.order3Dstatus == "Delivery/Pickup" || Model.order3D.order3Dstatus == "Order Arrived"){
                <div class="progres four active">
                <p>4</p>
                <i class="uil uil-check"></i>
                </div>
                }
                else{
                <div class="progres four">
                <p>4</p>
                <i class="uil uil-check"></i>
                </div>
                }
                <p class="text">Baking</p>
            </li>
            <!-- 5 Bar-->
            <li>
                <i class="fa-solid fa-clipboard-check icon"></i>
                @if (Model.order3D.order3Dstatus == "Order Confirmation" || Model.order3D.order3Dstatus == "Full Payment" || Model.order3D.order3Dstatus == "Delivery/Pickup" || Model.order3D.order3Dstatus == "Order Arrived"){
                <div class="progres five active">
                <p>5</p>
                <i class="uil uil-check"></i>
                </div>
                }
                else{
                <div class="progres five">
                <p>5</p>
                <i class="uil uil-check"></i>
                </div>
                }
                <p class="text">Order Confirmation</p>
            </li>
            <!-- 6 Bar-->
            <li>
                <i class="fa-solid fa-money-bill icon"></i>
                @if (Model.order3D.order3Dstatus == "Full Payment" || Model.order3D.order3Dstatus == "Delivery/Pickup" || Model.order3D.order3Dstatus == "Order Arrived"){
                <div class="progres six active">
                    <p>6</p>
                    <i class="uil uil-check"></i>
                </div>
                }
                else{
                <div class="progres six">
                <p>6</p>
                <i class="uil uil-check"></i>
                </div>
                }
                <p class="text">Full Payment</p>
            </li>
            <!-- 7 Bar-->
            <li>
                <i class="fa-solid fa-truck icon"></i>
                @if (Model.order3D.order3Dstatus == "Delivery/Pickup" || Model.order3D.order3Dstatus == "Order Arrived"){
                <div class="progres seven active">
                    <p>7</p>
                    <i class="uil uil-check"></i>
                </div>
                }
                else{
                <div class="progres seven">
                    <p>7</p>
                    <i class="uil uil-check"></i>
                </div>
                }
                <p class="text">Delivery/Pickup</p>
            </li>
            <!-- 8 Bar-->
            <li>
                <i class="fa-solid fa-location-dot icon"></i>
                @if (Model.order3D.order3Dstatus == "Order Arrived"){
                <div class="progres eight active">
                    <p>8</p>
                    <i class="uil uil-check"></i>
                </div>
                }
                else{
                <div class="progres eight">
                    <p>8</p>
                    <i class="uil uil-check"></i>
                </div>
                }
                <p class="text">Order Arrived</p>
            </li>
        </ul>

    </div>


     <div class="container">
            <div class="row justify-content-center">
             <div class="col-md-6 text-center">
                        <h2>Cake Design</h2>
                    <div id="container" class="container-box-3d">

      </div>
    </div>
  </div>



            <input type="hidden" name="modelname" id="modelname" value="@Model.order3D.ModelName1">
            <input type="hidden" name="scale" id="scale" value="@Model.order3D.Scale1">
            <input type="hidden" name="texture" id="texture" value="@Model.order3D.Texture1">
            <input type="hidden" name="texture2" id="texture2" value="@Model.order3D.Texture2">
            <input type="hidden" name="texture3" id="texture3" value="@Model.order3D.Texture3">
            <input type="hidden" name="color1" id="color1" value="@Model.order3D.Color">
            <input type="hidden" name="color2" id="color2" value="@Model.order3D.Color2">
            <input type="hidden" name="color3" id="color3" value="@Model.order3D.Color3">
            <!-- <input type="hidden" name="color" id="color" value=""> --> 
            @foreach(var item in Model.listAsset3D)
            {
            <input type="hidden" name="orderid" id="orderid" value="@item.OrderID" /> 
            <input type="hidden" name="assetname" id="assetname" value="@item.AssetID" /> 
            <input type="hidden" name="assetpath" id="assetpath"  value="@item.AssetPath"/> 
            <input type="hidden" name="assetscale" id="assetscale" value="@item.AssetScale"/>
            <input type="hidden" name="positionx" id="positionx" value="@item.PositionX"/>
            <input type="hidden" name="positiony" id="positiony" value="@item.PositionY"/>
            <input type="hidden" name="positionz" id="positionz" value="@item.PositionZ"/>
            }
           
            
                
               
              
</div>
     <div class="row justify-content-center">
             <div class="col-md-6 text-center">
            @if (Model.order3D.picture == "")
            {
               
                   
            }
            else
            {
            <h2>Image</h2>
            <div id="container" class="container-box-3d">
            <img src="@Model.order3D.picture"  width="300">
            </div>         

            }
            
    </div>
  </div>
<script type="importmap">
{
    "imports":{
        "three": "./js/three.module.js"
    }
}
    </script>
    <script type="text/javascript" src="./js/dat.gui.min.js"></script>
    
    <script type="module">
   
     import * as THREE from 'three';
     import {GLTFLoader} from "./js/GLTFLoader.js";
     import { OrbitControls } from './js/OrbitControls.js';
     
     var container, scene, camera, renderer, control, obj, obj2, light;
     var ambientLight, directionalLight, controls;
     var modelReady, modelGroup, modelDragBox, boxHelper;
     var modelReady2, modelGroup2, modelDragBox2, boxHelper2;
     var boxWidth, boxHeight, boxDepth;
     init();
     animate();
     function init()
     {
          //SCENE
             scene = new THREE.Scene(); 
             scene.background = new THREE.Color(0xF1DBC4);

             //CAMERA
              camera = new THREE.PerspectiveCamera(
                35,
                window.innerWidth/window.innerHeight,
                0.01,
                1000
             );
             camera.position.set(10, 10, 100); //Start positiong ng camera 

             //SCENE RENDERER
             renderer = new THREE.WebGLRenderer();
             renderer.setClearColor( 0x000000, 1 );
             renderer.setSize(window.innerWidth, window.innerHeight);
             container = document.getElementById( 'container' );
             container.appendChild( renderer.domElement );
             

             //CAMERA CONTROL
            controls = new OrbitControls(camera, renderer.domElement);
            controls.addEventListener('change',() => {renderer.render(scene, camera) });
            controls.target.set(0, 0, 0);
            controls.update();

            //LIGHTING
                ambientLight = new THREE.AmbientLight(0xffffff);
                scene.add(ambientLight);

            //DIRECTIONAL LIGHT PARA KUMINTAB YUNG MODEL 
            directionalLight = new THREE.DirectionalLight(0xffffff, 3);
            scene.add(directionalLight);
            obj;

            //Additional lighting lang
            light = new THREE.HemisphereLight(0xffffff, 0x000000, 2);
            scene.add(light);

          
            var count = 0;
            @foreach(var item in Model.listAsset3D){
            <text>
                count++;
                eval(`
                 var loader${count} = new GLTFLoader();
                        loader${count}.load('@item.AssetPath', function (model${count}) {
                       var obj${count} = model${count}.scene;
                        scene.add(model${count}.scene);
                        obj${count}.position.set(@item.PositionX, @item.PositionY, @item.PositionZ);
                        obj${count}.scale.set(1,1,1);
                        }, undefined, function (error) {
                            console.error(error);
                        });
                `)
             </text>
            }
      
    }
            function resizeRendererToContainer() 
            {
            const width = container.clientWidth;
            const height = container.clientHeight;
            renderer.setSize(width, height);
            camera.aspect = width / height;
            camera.updateProjectionMatrix();
            }

            // Call the function once to initialize the renderer dimensions
            resizeRendererToContainer();
    
            // Add an event listener to resize the renderer when the window size changes
            window.addEventListener('resize', resizeRendererToContainer);
             function animate()
             {
                requestAnimationFrame(animate);
                //obj.rotation.y +=0.01; //makes the object rotate
                renderer.render(scene, camera);
        
             }

         //LOAD NG MODEL USE .JSON FOR C# DI GUMAGANA .GTLF
         //Model and Texture loader
        var fileUrl = new URL('', import.meta.url); //Declaration ng model
        var ModelName = document.getElementById('modelname').value;
        var scale = document.getElementById('scale').value;
        var texture = document.getElementById('texture').value;
        var textureName = texture.toString();
        var texture2 = document.getElementById('texture2').value;
        var textureName2 = texture2.toString();
        var texture3 = document.getElementById('texture3').value;
        var textureName3 = texture3.toString();
        var color1 = document.getElementById('color1').value;
        var color2 = document.getElementById('color2').value;
        var color3 = document.getElementById('color3').value;
        var loader = new GLTFLoader();
       //GUI Color
 
       
         
        loader.load(ModelName, function (model1) {
            obj = model1.scene;
            scene.add(model1.scene);
            console.log(obj.getObjectByName('pCylinder5_1002_0'));
            obj.position.set(0, -30, 0); // Start position ng MODEL sa screen front/back,up/down,right/left (+,-)
            obj.getObjectByName(textureName).material.color.setHex(color1);
            obj.getObjectByName(textureName2).material.color.setHex(color2);
            obj.getObjectByName(textureName3).material.color.setHex(color3);

            
           
           
            obj.scale.set(scale,scale,scale); // Size ng model dapat pantay siya or magiiba yung shape
        }, undefined, function (error) {
            console.error(error);
        });
        
    

    
   
  
    </script>











    <script src="~/js/OrderStatus/OrderStatus.js"></script>






    <!-- FOOTER -->
    <div id="footerBottom" style="background-color: #f7fff8;">
        <div class="container">
            <footer class="row row-cols-1 row-cols-sm-2 row-cols-md-4 py-5 my- border-bottom">
                <!-- Division 1 -->
                <div class="divisions col mb-3">
                    <div>
                        <img class="img-fluid" src="~/img/logo/logofooter.png" style="width: 18rem;">
                    </div>
                    <p class="text-bottom" style="font-family: Poppins ExtraBold;">
                        Serving you sweet treats made with love ❤️
                        We accept customized cakes, cupcakes, & more! Order now!
                    </p>
                </div>

                <!-- Division 2 -->
                <div class="divisions col mb-4">
                    <h5 class="heading-bottom" style="font-family: Poppins ExtraBold;">Contact Us</h5>
                    <ul class="nav flex-column">
                        <li class="nav-item mb-2" style="font-family: Poppins ExtraBold; display:flex; flex-direction:row; align-items: center;"><img class="phone" src="~/img/logo/phone.png">+63 09164656894</li>
                        <li class="nav-item mb-2" style="font-family: Poppins ExtraBold; display:flex; flex-direction:row; align-items: center;"><img class="mail" src="~/img/logo/mail.png"><a href="mailto:abakes881@gmail.com">abakes881@gmail.com</a></li>
                    </ul>
                </div>

                <!-- Division 3 -->
                <div class="divisions col mb-4">
                    <h5 class="heading-bottom" style="font-family: Poppins ExtraBold;">Follow Us</h5>
                    <ul class="socials-pics nav flex-row img-fluid">
                        <li class="nav-item2 mb-2"><a href="https://www.facebook.com/a.bakesandsweets" target="_blank"><img class="socials img-fluid" src="~/img/logo/facebook.png"></a></li>
                        <li class="nav-item5 mb-2"><a href="https://www.instagram.com/a_bakesandsweets/" target="_blank"><img class="socials img-fluid" src="~/img/logo/instagram.png"></a></li>
                    </ul>
                </div>

                <!-- Division 4 -->
                <div class="divisions col mb-4">
                    <h5 class="heading-bottom" style="font-family: Poppins ExtraBold;">Terms and Conditions</h5>
                        <button style="margin-bottom:-10px;" class="btn btn-primary btn-sm read-terms-btn" onclick="window.location.href='/Customer_TermsandCondition'">Read Terms</button>
                        <button style=" margin-bottom:-10px;width:185px;" class="btn btn-primary btn-sm read-terms-btn" onclick="window.location.href='/Customer_FAQS'">Help Me</button>
                        <button style="margin-bottom:-2px; width:185px;" class="btn btn-primary btn-sm read-terms-btn" onclick="window.location.href='/Customer_Privacy'">Privacy</button>                </div>
            </footer>
        </div>
        <div></div>
    </div>




    <script>
        var MenuItems = document.getElementById("MenuItems");
        MenuItems.style.maxHeight = "0px";
        function menutoggle() {
            if (MenuItems.style.maxHeight == "0px") {
                MenuItems.style.maxHeight = "300px"
            }
            else {
                MenuItems.style.maxHeight = "0px"
            }
        }
        src = "~/js/bootstrap.bundle.min.js"

    </script>
</body>
</html>