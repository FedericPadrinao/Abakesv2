@page
@model abakes2.Pages.Admin_View3DAssetModel
@{
    Layout = null;
}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i&display=swap" rel="stylesheet">
    <link href="~/css/AdminDashboard/styles.css" rel="stylesheet" asp-append-version="true">
        <script src="https://kit.fontawesome.com/e91d01519e.js" crossorigin="anonymous"></script>

    <title>View Simple Order</title>
</head>

<body>
    <!--NAV BAR-->
    <!-- Banner -->
    <!-- Banner -->
    <div class="container">
        <div class="topbar">
            <div class="logo">
                <a href="/AdminDashboard"><img src="~/img/logo/logofooter.png" alt="logo" width="75px"></a>
            </div>

            <div class="user">
                <img src="~/img/AdminDashboard/user.png" alt="">
            </div>
        </div>
        <div class="sidebar">
            <ul>
                <li>
                    <a href="/Admin_ManageCakes">
                        <i class="fas fa-birthday-cake"></i>
                        <div>Manage Cake</div>
                    </a>
                </li>
                <li>
                    <a href="/Admin_ManageIngredients">
                        <i class="fas fa-utensils"></i>
                        <div>Manage Ingredients</div>
                    </a>
                </li>
                                                <li>
                    <a href="/Admin_Manage3DAsset">
                        <i class="fa-brands fa-unity"></i>
                        <div>Manage 3D Asset</div>
                    </a>
                </li>
                <li>
                    <a href="/Admin_ManageOrders">
                        <i class="fas fa-receipt"></i>
                        <div>Manage Orders</div>
                    </a>
                </li>
                <li>
                    <a href="/ManagePayments">
                        <i class="fas fa-money-check"></i>
                        <div>Manage Payments</div>
                    </a>
                </li>
                 <li>
                    <a href="/Admin_ManagePaymentMethod">
                        <i class="fas fa-cash-register"></i>
                        <div>Manage Payment Method</div>
                    </a>
                </li>
                <li>
                    <a href="/Admin_ManageFeedback">
                        <i class="fas fa-comments"></i>
                        <div>Manage Feedback</div>
                    </a>
                </li>
                <li>
                    <a href="/Admin_Notif">
                        <i class="fas fa-bell"></i>
                        <div>Manage Notification</div>
                    </a>
                </li>
                <li>
                    <a href="/Admin_ManageQR">
                        <i class="fas fa-qrcode"></i>
                        <div>Manage QR Code</div>
                    </a>
                </li>
                <li>
                    <a href="/Admin_ManageAcc">
                        <i class="fas fa-user"></i>
                        <div>Account Manager</div>
                    </a>
                </li>
                <li>
                    <a href="/AdminDashboard">
                        <i class="fas fa-chart-bar"></i>
                        <div>Statistical Report</div>
                    </a>
                </li>
                <li>
                    <a href="/Admin_ChangePassword">
                        <i class="fas fa-lock"></i>
                        <div>Change Password</div>
                    </a>
                </li>
                <li>
                    <a asp-page="/index" asp-page-handler="LogOut">
                        <i class="fas fa-sign-out-alt"></i>
                        <div>Log out</div>
                    </a>
                </li>

            </ul>
        </div>


        <div class="main">
            <section class="page-heading" style="background-image: url('/img/contact/cover2.png');">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="text-content">
                                <h2>Viewing 3D Asset</h2>
                            </div>
                        </div>
                    </div>
                </div>
            </section>


    <div class="account-page">
               <a href="/Admin_Manage3DAsset" type="submit" class="btn" style="margin:1%;">Back</a>

 <!-- 3D PORTION -->

     <div id="container" class="adminbox" style="height:800px; width:900px; border-radius:5%;">
            
            <input type="hidden" name="modelname" id="modelname" value="@Model.asset3D.AssetPath">
            <input type="hidden" name="scale" id="scale" value="@Model.asset3D.AssetScale">
          
            <!-- <input type="hidden" name="color" id="color" value=""> --> 
          
            
                
               
              
            </div>
     
<script type="importmap">
{
    "imports":{
        "three": "./js/three.module.js"
    }
}
    </script>
    <script type="text/javascript" src="./js/dat.gui.min.js"></script>
    
    <script type="module">
   
     import * as THREE from 'three';
     import {GLTFLoader} from "./js/GLTFLoader.js";
     import { OrbitControls } from './js/OrbitControls.js';
     
     var container, scene, camera, renderer, control, obj, obj2, light;
     var ambientLight, directionalLight, controls;
     var modelReady, modelGroup, modelDragBox, boxHelper;
     var modelReady2, modelGroup2, modelDragBox2, boxHelper2;
     var boxWidth, boxHeight, boxDepth;
     init();
     animate();
     function init()
     {
          //SCENE
             scene = new THREE.Scene(); 
             scene.background = new THREE.Color(0xF1DBC4);

             //CAMERA
              camera = new THREE.PerspectiveCamera(
                75,
                window.innerWidth/window.innerHeight,
                0.01,
                1000
             );
             camera.position.set(10, 10, 100); //Start positiong ng camera 

             //SCENE RENDERER
             renderer = new THREE.WebGLRenderer();
             renderer.setClearColor( 0x000000, 1 );
             renderer.setSize(window.innerWidth, window.innerHeight);
             container = document.getElementById( 'container' );
             container.appendChild( renderer.domElement );
             

             //CAMERA CONTROL
            controls = new OrbitControls(camera, renderer.domElement);
            controls.addEventListener('change',() => {renderer.render(scene, camera) });
            controls.target.set(0, 0, 0);
            controls.update();

            //LIGHTING
                ambientLight = new THREE.AmbientLight(0xffffff);
                scene.add(ambientLight);

            //DIRECTIONAL LIGHT PARA KUMINTAB YUNG MODEL 
            directionalLight = new THREE.DirectionalLight(0xffffff, 3);
            scene.add(directionalLight);
            obj;

            //Additional lighting lang
            light = new THREE.HemisphereLight(0xffffff, 0x000000, 2);
            scene.add(light);
     
      
    }
            function resizeRendererToContainer() 
            {
            const width = container.clientWidth;
            const height = container.clientHeight;
            renderer.setSize(width, height);
            camera.aspect = width / height;
            camera.updateProjectionMatrix();
            }

            // Call the function once to initialize the renderer dimensions
            resizeRendererToContainer();
    
            // Add an event listener to resize the renderer when the window size changes
            window.addEventListener('resize', resizeRendererToContainer);
            

         //LOAD NG MODEL USE .JSON FOR C# DI GUMAGANA .GTLF
         //Model and Texture loader
        var fileUrl = new URL('', import.meta.url); //Declaration ng model
        var ModelName = document.getElementById('modelname').value;
        var scale = document.getElementById('scale').value; 
        var loader = new GLTFLoader();
       //GUI Color
 
       
         
        loader.load(ModelName, function (model1) {
            obj = model1.scene;
            scene.add(model1.scene);
           
            obj.position.set(0, 0, 0); // Start position ng MODEL sa screen front/back,up/down,right/left (+,-)
           
          
            
            obj.scale.set(5,5,5); // Size ng model dapat pantay siya or magiiba yung shape
        }, undefined, function (error) {
            console.error(error);
        });
        
    

     function animate(time)
             {
                if(obj)
                {
                obj.rotation.y = - time/1000; 
                renderer.render(scene, camera)
                }
                requestAnimationFrame(animate);     
             }
   
  
    </script>


</body>