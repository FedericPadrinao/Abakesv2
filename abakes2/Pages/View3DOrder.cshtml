@page
@model abakes2.Pages.View3DOrderModel
@{
    Layout = null;
}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i&display=swap" rel="stylesheet">
    <link href="~/css/AdminDashboard/styles.css" rel="stylesheet" asp-append-version="true">
    <title>View Simple Order</title>
</head>

<body>
    <!--NAV BAR-->
    <!-- Banner -->
    <!-- Banner -->
    <div class="container">
        <div class="topbar">
            <div class="logo">
                <a href="/AdminDashboard"><img src="~/img/logo/logofooter.png" alt="logo" width="75px"></a>
            </div>
            <div class="search">
                <input type="text" name="search" placeholder="search here">
                <label for="search"><i class="fas fa-search"></i></label>
            </div>
            <i class="fas fa-bell"></i>
            <div class="user">
                <img src="~/img/AdminDashboard/user.png" alt="">
            </div>
        </div>
        <div class="sidebar">
            <ul>
                <li>
                    <a href="/Admin_ManageCakes">
                        <i class="fas fa-birthday-cake"></i>
                        <div>Manage Cake</div>
                    </a>
                </li>
                <li>
                    <a href="/Admin_ManageOrders">
                        <i class="fas fa-receipt"></i>
                        <div>Manage Orders</div>
                    </a>
                </li>
                <li>
                    <a href="/Admin_ManageFeedback">
                        <i class="fas fa-comments"></i>
                        <div>Manage Feedback</div>
                    </a>
                </li>
                <li>
                    <a href="/Admin_Notif">
                        <i class="fas fa-bell"></i>
                        <div>Manage Notification</div>
                    </a>
                </li>
                <li>
                    <a href="/Admin_ManageQR">
                        <i class="fas fa-qrcode"></i>
                        <div>Manage QR Code</div>
                    </a>
                </li>
                <li>
                    <a href="/Admin_ManageAcc">
                        <i class="fas fa-user"></i>
                        <div>Account Manager</div>
                    </a>
                </li>
                <li>
                    <a href="/AdminDashboard">
                        <i class="fas fa-chart-bar"></i>
                        <div>Statistical Report</div>
                    </a>
                </li>
                <li>
                    <a href="/Admin_ChangePassword">
                        <i class="fas fa-lock"></i>
                        <div>Change Password</div>
                    </a>
                </li>
                <li>
                    <a asp-page="/index" asp-page-handler="LogOut">
                        <i class="fas fa-sign-out-alt"></i>
                        <div>Log out</div>
                    </a>
                </li>

            </ul>
        </div>


        <div class="main">
            <section class="page-heading" style="background-image: url('/img/contact/cover2.png');">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="text-content">
                                <h2>Adding Price</h2>
                            </div>
                        </div>
                    </div>
                </div>
            </section>


            <div class="account-page">
                <div class="container" style="padding-top: 55px;">

                    <!-- CUSTOMER INFORMATION-->
                    <div class="row">
                        <div class="adminbox" style="height: 50%; width: 550px; padding: 45px; border-radius: 5%; text-align:left;">

                            <input type="hidden" name="id" value="@Model.orderSimple.osID" />
                            <div class="p-5 p-lg-5 border">
                                <div class="form-group row">
                                    <div class="col-md-12">
                                        <h3 style="text-align:center;">Customer Details</h3>
                                    </div>
                                </div>

                            <div class="p-5 p-lg-5 border">
                                <div class="form-group row">
                                    <div class="col-md-12">
                                        <label for="c_hadd" class="text-black"><b>Customer:</b> </label>
                                        <label for="c_hadd" class="text-black">@Model.customerInfo.username</label>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <div class="col-md-12">
                                        <label for="c_hadd" class="text-black"><b>First Name</b>  </label>
                                        <label for="c_hadd" class="text-black">@Model.customerInfo.fname</label>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-md-12">
                                            <label for="c_hadd" class="text-black"><b>Last Name:</b>  </label>
                                            <label for="c_hadd" class="text-black">@Model.customerInfo.lname</label>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-md-12">
                                            <label for="c_hadd" class="text-black"><b>City:</b>  </label>
                                            <label for="c_hadd" class="text-black">@Model.customerInfo.city</label>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-md-12">
                                            <label for="c_hadd" class="text-black"><b>Address</b>  </label>
                                            <label for="c_hadd" class="text-black">@Model.customerInfo.address</label>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-md-12">
                                            <label for="c_hadd" class="text-black"><b>Barangay:</b>  </label>
                                            <label for="c_hadd" class="text-black">@Model.customerInfo.barangay</label>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-md-12">
                                            <label for="c_hadd" class="text-black"><b>Email Address:</b>  </label>
                                            <label for="c_hadd" class="text-black">@Model.customerInfo.email</label>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-md-12">
                                            <label for="c_hadd" class="text-black"><b>Phone:</b>  </label>
                                            <label for="c_hadd" class="text-black">@Model.customerInfo.phone</label>
                                        </div>
                                    </div>
                                </div>

                            </div>

                        </div>
                        </div>
                        <br />
                        <!-- PRICE DETAILS-->
                        <div class="row">
                            <div class="adminbox" style="height: 50%; width: 550px; padding: 45px; border-radius: 5%; text-align:left;">
                                <form method="post">
                                    <input type="hidden" name="id" value="@Model.orderSimple.osID" />
                                    <div class="p-5 p-lg-5 border">
                                        <div class="form-group row">
                                            <div class="col-md-12">
                                                <h3 style="text-align:center;">Add Price and Delivery</h3>
                                            </div>
                                        </div>

                                    <div class="form-group row">
                                        <div class="col-md-12">
                                            <label for="c_hadd" class="text-black"><b>Product Price:</b> </label>
                                            <input type="text" class="form-control" id="price" name="price" required value="@Model.orderSimple.osPrice">
                                        </div>

                                        <div class="form-group row">
                                            <div class="col-md-12">
                                                <label for="c_hadd" class="text-black"><b>Shipping Price:</b> </label>
                                                <input type="text" class="form-control" id="ship" name="ship" required value="@Model.orderSimple.osShip">
                                            </div>
                                        </div>

                                        <div class="form-group row">
                                            <div class="col-md-12">
                                                <label for="c_hadd" class="text-black"><b>Expected Delivery:</b> </label>
                                                <input style="height:21px" type="date" name="expectedD" value="@Model.orderSimple.osExpectedD" />
                                            </div>
                                            <div class="col-md-12">
                                                <label for="c_hadd" class="text-black"><b>Expected Time:</b> </label>
                                                <input style="height:21px" type="time" name="expectedT" value="@Model.orderSimple.osExpectedT" />
                                            </div>
                                        </div>
                                        <div class="form-group row">
                                            <div class="col-lg-12">

                                                <button type="submit" class="btn" name="submit" id="submit">Submit</button>
                                            </div>
                                            <p>@Model.successMessage</p>
                                            <p>@Model.errorMessage</p>
                                        </div>
                                    </div>
                                </form>
                            </div>

                        </div>
                    </div>
                </div>


 <!-- 3D PORTION -->

     <div id="container" class="adminbox" style="height:800px; width:900px; border-radius:5%;">

            <input type="hidden" name="modelname" id="modelname" value="@Model.order3d.ModelName1">
            <input type="hidden" name="scale" id="scale" value="@Model.order3d.Scale1">
            <input type="hidden" name="texture" id="texture" value="@Model.order3d.Texture1">
            <input type="hidden" name="texture2" id="texture2" value="@Model.order3d.Texture2">
            <input type="hidden" name="texture3" id="texture3" value="@Model.order3d.Texture3">
            <input type="hidden" name="color1" id="color1" value="@Model.order3d.Color">
            <input type="hidden" name="color2" id="color2" value="@Model.order3d.Color2">
            <input type="hidden" name="color3" id="color3" value="@Model.order3d.Color3">
            <!-- <input type="hidden" name="color" id="color" value=""> --> 
            @foreach(var item in Model.listAsset3D)
            {
            <input type="hidden" name="orderid" id="orderid" value="@item.OrderID" /> 
            <input type="hidden" name="assetname" id="assetname" value="@item.AssetID" /> 
            <input type="hidden" name="assetpath" id="assetpath"  value="@item.AssetPath"/> 
            <input type="hidden" name="assetscale" id="assetscale" value="@item.AssetScale"/>
            <input type="hidden" name="positionx" id="positionx" value="@item.PositionX"/>
            <input type="hidden" name="positiony" id="positiony" value="@item.PositionY"/>
            <input type="hidden" name="positionz" id="positionz" value="@item.PositionZ"/>
            }
           
            
                
               
                <div id="gui-container" style="position: absolute; top:600px; left: 395px;"></div>
            </div>
     
<script type="importmap">
{
    "imports":{
        "three": "./js/three.module.js"
    }
}
    </script>
    <script type="text/javascript" src="./js/dat.gui.min.js"></script>
    
    <script type="module">
   
     import * as THREE from 'three';
     import {GLTFLoader} from "./js/GLTFLoader.js";
     import { OrbitControls } from './js/OrbitControls.js';
     
     var container, scene, camera, renderer, control, obj, obj2, light;
     var ambientLight, directionalLight, controls;
     var modelReady, modelGroup, modelDragBox, boxHelper;
     var modelReady2, modelGroup2, modelDragBox2, boxHelper2;
     var boxWidth, boxHeight, boxDepth;
     init();
     animate();
     function init()
     {
          //SCENE
             scene = new THREE.Scene(); 
             scene.background = new THREE.Color(0xF1DBC4);

             //CAMERA
              camera = new THREE.PerspectiveCamera(
                75,
                window.innerWidth/window.innerHeight,
                0.01,
                1000
             );
             camera.position.set(10, 10, 100); //Start positiong ng camera 

             //SCENE RENDERER
             renderer = new THREE.WebGLRenderer();
             renderer.setClearColor( 0x000000, 1 );
             renderer.setSize(window.innerWidth, window.innerHeight);
             container = document.getElementById( 'container' );
             container.appendChild( renderer.domElement );
             

             //CAMERA CONTROL
            controls = new OrbitControls(camera, renderer.domElement);
            controls.addEventListener('change',() => {renderer.render(scene, camera) });
            controls.target.set(0, 0, 0);
            controls.update();

            //LIGHTING
                ambientLight = new THREE.AmbientLight(0xffffff);
                scene.add(ambientLight);

            //DIRECTIONAL LIGHT PARA KUMINTAB YUNG MODEL 
            directionalLight = new THREE.DirectionalLight(0xffffff, 3);
            scene.add(directionalLight);
            obj;

            //Additional lighting lang
            light = new THREE.HemisphereLight(0xffffff, 0x000000, 2);
            scene.add(light);

          
            var count = 0;
            @foreach(var item in Model.listAsset3D){
            <text>
                count++;
                eval(`
                 var loader${count} = new GLTFLoader();
                        loader${count}.load('@item.AssetPath', function (model${count}) {
                       var obj${count} = model${count}.scene;
                        scene.add(model${count}.scene);
                        obj${count}.position.set(@item.PositionX, @item.PositionY, @item.PositionZ);
                        obj${count}.scale.set(1,1,1);
                        }, undefined, function (error) {
                            console.error(error);
                        });
                `)
             </text>
            }
      
    }
            function resizeRendererToContainer() 
            {
            const width = container.clientWidth;
            const height = container.clientHeight;
            renderer.setSize(width, height);
            camera.aspect = width / height;
            camera.updateProjectionMatrix();
            }

            // Call the function once to initialize the renderer dimensions
            resizeRendererToContainer();
    
            // Add an event listener to resize the renderer when the window size changes
            window.addEventListener('resize', resizeRendererToContainer);
             function animate()
             {
                requestAnimationFrame(animate);
                //obj.rotation.y +=0.01; //makes the object rotate
                renderer.render(scene, camera);
        
             }

         //LOAD NG MODEL USE .JSON FOR C# DI GUMAGANA .GTLF
         //Model and Texture loader
        var fileUrl = new URL('', import.meta.url); //Declaration ng model
        var ModelName = document.getElementById('modelname').value;
        var scale = document.getElementById('scale').value;
        var texture = document.getElementById('texture').value;
        var textureName = texture.toString();
        var texture2 = document.getElementById('texture2').value;
        var textureName2 = texture2.toString();
        var texture3 = document.getElementById('texture3').value;
        var textureName3 = texture3.toString();
        var color1 = document.getElementById('color1').value;
        var color2 = document.getElementById('color2').value;
        var color3 = document.getElementById('color3').value;
        var loader = new GLTFLoader();
       //GUI Color
         const guiContainer = document.getElementById('gui-container');
       
         
        loader.load(ModelName, function (model1) {
            obj = model1.scene;
            scene.add(model1.scene);
            console.log(obj.getObjectByName('pCylinder5_1002_0'));
            obj.getObjectByName(textureName).material.color.setHex(color1);
            obj.getObjectByName(textureName2).material.color.setHex(color2);
            obj.getObjectByName(textureName3).material.color.setHex(color3);
           
            obj.position.set(0, -30, 0); // Start position ng MODEL sa screen front/back,up/down,right/left (+,-)
            obj.scale.set(scale,scale,scale); // Size ng model dapat pantay siya or magiiba yung shape
        }, undefined, function (error) {
            console.error(error);
        });
        
    

    
   
  
    </script>


</body>
 

