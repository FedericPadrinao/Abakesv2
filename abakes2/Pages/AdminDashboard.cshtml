@page
@model abakes2.Pages.AdminDashboardModel
@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
    <link href="~/css/AdminDashboard/styles.css" rel="stylesheet" asp-append-version="true">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/charts.css/dist/charts.min.css">
    <script src="https://kit.fontawesome.com/e91d01519e.js" crossorigin="anonymous"></script>

    <title>Admin Panel</title>
    <style>
    a {
        text-decoration: none;
    }
</style>
</head>

<body>
    <div class="container">
        <div class="topbar">
            <div class="logo">
                <a href="/AdminDashboard"><img src="~/img/logo/logofooter.png" alt="logo" width="75px"></a>
            </div>

            <div class="user">
                <img src="~/img/AdminDashboard/user.png" alt="">
            </div>
        </div>
        <div class="sidebar">
            <ul>
                <li>
                    <a href="/Admin_ManageCakes">
                        <i class="fas fa-birthday-cake"></i>
                        <div>Manage Cake</div>
                    </a>
                </li>
                <li>
                    <a href="/Admin_ManageIngredients">
                        <i class="fas fa-utensils"></i>
                        <div>Manage Ingredients</div>
                    </a>
                </li>
                <li>
                    <a href="/Admin_Manage3DAsset">
                        <i class="fa-brands fa-unity"></i>
                        <div>Manage 3D Asset</div>
                    </a>
                </li>
                <li>
                    <a href="/Admin_ManageOrders">
                        <i class="fas fa-receipt"></i>
                        <div>Manage Orders</div>
                    </a>
                </li>
                <li>
                    <a href="/ManagePayments">
                        <i class="fas fa-money-check"></i>
                        <div>Manage Payments</div>
                    </a>
                </li>
                <li>
                    <a href="/Admin_ManageFeedback">
                        <i class="fas fa-comments"></i>
                        <div>Manage Feedback</div>
                    </a>
                </li>
                <li>
                    <a href="/Admin_Notif">
                        <i class="fas fa-bell"></i>
                        <div>Manage Notification</div>
                    </a>
                </li>
                <li>
                    <a href="/Admin_ManageQR">
                        <i class="fas fa-qrcode"></i>
                        <div>Manage QR Code</div>
                    </a>
                </li>
                <li>
                    <a href="/Admin_ManageAcc">
                        <i class="fas fa-user"></i>
                        <div>Account Manager</div>
                    </a>
                </li>
                <li>
                    <a href="/AdminDashboard" class="active">
                        <i class="fas fa-chart-bar"></i>
                        <div>Statistical Report</div>
                    </a>
                </li>
                <li>
                    <a href="/Admin_ChangePassword">
                        <i class="fas fa-lock"></i>
                        <div>Change Password</div>
                    </a>
                </li>
                <li>
                    <a asp-page="/index" asp-page-handler="LogOut">
                        <i class="fas fa-sign-out-alt"></i>
                        <div>Log out</div>
                    </a>
                </li>
            </ul>
        </div>
        <div class="main">
            <div class="cards">
                <a href="Admin_ManageFeedback">
                <div class="card">
                    
                    <div class="card-content">
                        
                        <div class="number">@Model.feedbackcount</div>
                        <div class="card-name">Active Feedback</div>
                    </div>
                    <div class="icon-box">
                        <i class="fas fa-comment"></i>
                    </div>
                    
                </div>
                </a>
                <a href="Admin_ManageArchiveFeedbacks">
                <div class="card">
                    
                    <div class="card-content">
                        
                        <div class="number">@Model.feedbackpendingcount</div>
                        <div class="card-name">Pending Feedback</div>
                    </div>
                    <div class="icon-box">
                        <i class="fas fa-comment"></i>
                    </div>
                    
                </div>
                </a>
                <div class="card">
                    <div class="card-content">
                        <div class="number">@Model.formatrating</div>
                        <div class="card-name">Average Service Rating</div>
                    </div>
                    <div class="icon-box">
                        <i class="fas fa-star"></i>
                    </div>
                </div>
                <div class="card">
                    <div class="card-content">
                        <div class="number">PHP @Model.totalearnings</div>
                        <div class="card-name">Earnings</div>
                    </div>
                    <div class="icon-box">
                        <i class="fas fa-peso-sign"></i>
                    </div>
                </div>
                <a href="Admin_ManageAcc">
                <div class="card">
                    <div class="card-content">
                        <div class="number">@Model.usercount</div>
                        <div class="card-name">Active Users</div>
                    </div>
                    <div class="icon-box">
                        <i class="fas fa-users"></i>
                    </div>
                </div>
                </a>
                <a href="Admin_ManageBlockedAcc">
                <div class="card">
                    <div class="card-content">
                        <div class="number">@Model.blockedusercount</div>
                        <div class="card-name">Blocked Users</div>
                    </div>
                    <div class="icon-box">
                        <i class="fas fa-user-slash"></i>
                    </div>
                </div>
                </a>
                <a href="Admin_ManageSimpleOrders2">
                <div class="card">
                    <div class="card-content">
                        <div class="number">@Model.ordersimplecount</div>
                        <div class="card-name">Approved Simple Orders</div>
                    </div>
                    <div class="icon-box">
                        <i class="fa-solid fa-check"></i>
                    </div>
                </div>
                </a>
                <a href="Admin_ManageOrders">
                <div class="card">
                    <div class="card-content">
                        <div class="number">@Model.simplepending</div>
                        <div class="card-name">Pending Simple Orders</div>
                    </div>
                    <div class="icon-box">
                        <i class="fa-regular fa-clock"></i>
                    </div>
                </div>
                </a>
                <a href="Admin_Manage3DOrders">
                <div class="card">
                    <div class="card-content">
                        <div class="number">@Model.threepending</div>
                        <div class="card-name">Pending 3D Orders</div>
                    </div>
                    <div class="icon-box">
                        <i class="fas solid fa-clock"></i>
                    </div>
                </div>
                </a>
                <a href="Admin_Manage3DOrders2">
                <div class="card">
                    <div class="card-content">
                        <div class="number">@Model.threesimplecount</div>
                        <div class="card-name">Approved 3D Orders</div>
                    </div>
                    <div class="icon-box">
                        <i class="fa-solid fa-list-check"></i>
                    </div>
                </div>
                </a>
                <a href="ManagePayments">
                <div class="card">
                    <div class="card-content">
                        <div class="number">@Model.totalpendingpayment</div>
                        <div class="card-name">Incomplete Payment</div>
                    </div>
                    <div class="icon-box">
                        <i class="fas fa-clipboard"></i>
                    </div>
                </div>
                </a>
                <a href="ManagePayments2">
                <div class="card">
                    <div class="card-content">
                        <div class="number">@Model.totalcompleteorder</div>
                        <div class="card-name">Completed Orders</div>
                    </div>
                    <div class="icon-box">
                        <i class="fa-solid fa-clipboard-check"></i>
                    </div>
                </div>
                </a>
            </div>
            <div class="charts" style="grid-template-rows: repeat(2, 1fr);">
                <div class="chart doughnut-chart">
                    <h2>Cake Flavors</h2>
                    <div>
                        <canvas id="doughnut" data-url="@Url.Page("AdminDashboard", "GetFlavorData")"></canvas>
                    </div>
                </div>
                <div class="chart doughnut-chart">
                    <h2>Cake Shapes</h2>
                    <div>
                        <canvas id="doughnut2" data-url="@Url.Page("AdminDashboard", "GetShapeData")"></canvas>
                    </div>
                </div>
                <div class="chart doughnut-chart">
                    <h2>Occasions for Cakes</h2>
                    <div>
                        <canvas id="doughnut3" data-url="@Url.Page("AdminDashboard", "GetOccasionData")"></canvas>
                    </div>
                </div>
                <div class="chart doughnut-chart">
                    <h2>Gender Distribution</h2>
                    <div>
                        <canvas id="doughnut4" data-url="@Url.Page("AdminDashboard", "GetGenderData")"></canvas>
                    </div>
                </div>
                <div class="chart doughnut-chart">
                    <h2>Age Distribution</h2>
                    <div>
                        <canvas id="doughnut5" data-url="@Url.Page("AdminDashboard", "GetAgeData")"></canvas>
                    </div>
                </div>
            </div>
            <div class="charts" style="grid-template-columns: 4fr;">
                <div class="chart">
                    <h2>Monthly Sales</h2>
                    <div>
                        <table class="charts-css line multiple show-data show-labels show-primary-axis show-1-secondary-axes ">
                            <caption>Monthly Sales</caption>
                            <thead>
                                <tr>
                                    <th scope="col">Month</th>
                                    <th scope="col">Sales</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var monthlySale in Model.MonthlySalesData)
                                {
                                    <tr>
                                        <th scope="row">@monthlySale.Month</th>
                                        <td style="--start: 0.1; --end: @(monthlySale.Sales / 40000.0 + 0.1);" class="border"><span class="data">@monthlySale.Sales</span></td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                        <form id="monthForm" method="get" asp-page="AdminDashboard">
                            <label for="monthSelect">Select Month:</label>
                            <select id="monthSelect" name="selectedMonth" onchange="document.getElementById('monthForm').submit()">
                                <option value="0">All Months</option>
                                <option value="1">January</option>
                                <option value="2">February</option>
                                <option value="3">March</option>
                                <option value="4">April</option>
                                <option value="5">May</option>
                                <option value="6">June</option>
                                <option value="7">July</option>
                                <option value="8">August</option>
                                <option value="9">September</option>
                                <option value="10">October</option>
                                <option value="11">November</option>
                                <option value="12">December</option>
                            </select>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.5.1/dist/chart.min.js"></script>
    <script src="~/js/AdminDashboardjs/chart1.js"></script>
    <script src="~/js/AdminDashboardjs/chart2.js"></script>
    <script src="~/js/AdminDashboardjs/chart3.js"></script>
    <script src="~/js/AdminDashboardjs/chart4.js"></script>
    <script src="~/js/AdminDashboardjs/chart5.js"></script>
    <script src="~/js/AdminDashboardjs/chart6.js"></script>
    <script>
        function updatePieCharts(selectedMonth) {
            window.location.href = `AdminDashboard?selectedMonth=${selectedMonth}`;
        }
    </script>
</body>

</html>